---
title: |
  Reproducible data synopsis reports facilitate broad monitoring and data transparency: an example with over 100 Pacific Canadian groundfish species
author: |
  Sean C. Anderson^1^, Elise A. Keppel^2^\, \ldots\
  ^1^Pacific Biological Station, Fisheries and Oceans Canada
     Nanaimo, BC, V6T 6N7, Canada;\
     sean.anderson@dfo-mpo.gc.ca\
  ^2^Pacific Biological Station, Fisheries and Oceans Canada
     Nanaimo, BC, V6T 6N7, Canada;\
     elise.keppel@dfo-mpo.gc.ca
output:
  bookdown::pdf_document2:
    number_sections: no
    toc: no
    template: "article.tex"
fontfamily: libertine
fontsize: 11pt
header-includes:
    - \usepackage{setspace}
    - \usepackage[left]{lineno}\linenumbers\modulolinenumbers[1]
geometry: "left=2.54cm,right=2.54cm,top=2.54cm,bottom=2.54cm"
bibliography: "refs.bib"
csl: "cfjas.csl"
link-citations: yes
linkcolor: "blue"
urlcolor: "blue"
abstract: >
  The abstract will go here.
---

\clearpage

```{r, echo = FALSE, message = FALSE, warning = FALSE}
library(knitr)
library(here)
opts_chunk$set(echo = FALSE, message = FALSE, warnings = FALSE)
```

Keywords: 
fisheries monitoring,
groundfish,
reproducible research,
visualization

# Introduction

Modern survey and fishery monitoring programs generate vast quantities of data; however, turning that data into effective monitoring remains a challenge. Agencies that collect data often lack the resources to report on all facets of it in a timely fashion. Typically, only data for a small subset of species is reported on through detailed stock assessments. While such intense analysis is undoubtedly valuable, broad monitoring programs across an array of species and datatypes are essential to detecting ecological surprises and "unknown unknowns" [e.g. @hilborn1987; @wintle2010]. As part of a movement towards open data, many raw data sets, especially those collected by government agencies, are being made freely available. However, processing those data sets requires domain-specific knowledge (e.g., about sampling protocols), advanced skill sets, and time. Collectively, these factors often limit the ability for stakeholders such as resource users or concerned citizens to engage with monitoring data and derive their own insights.

In British Columbia (BC), Canada, Fisheries and Oceans Canada (DFO) faces these problems in monitoring its groundfish populations and fisheries. In BC, government groundfish scientists hold the potential responsibility of providing science advice on over 100 species. The commercial groundfish fleet is subject to 100% on-board and dockside monitoring and numerous fisheries-independent trawl and longline surveys are conducted annually producing large quantities of valuable data. At the same time, assessment scientists face limitations in personnel and time. As a result, most stocks are not regularly examined through stock assessment, leaving the majority of monitoring data unreported. Although the Canadian government is engaged in an open-data initiative, some of DFO's data holdings will never be shared due to privacy laws, and the data that are shared are not easily digested without extensive knowledge of the survey programs and commercial fisheries, and advanced data processing skill sets.

Automated visualization and reporting is one solution to these problems. Visualization can serve as much more than just an endpoint to data analysis---it can serve as a critical component of the scientific process [@fox2011]. Unlike raw data sets, visualization can facilitate rapid understanding of data, engage stakeholders, and raise awareness of data gaps. Visualization can serve as a tool for those with domain specific knowledge to spot errors in data sets. Furthermore, compared to the structured nature of statistical models, the unconstrained nature of visualization better allows for detecting surprises. The advancement of the ecosystem of data analysis packages for the statistical software R [REF] such as knitr [REF], makes it easier now more than ever to produce reproducible visualization reports of survey and fishery monitoring data.

Here, as part of a solution to our above-mentioned challenges, we introduce an automated data synopsis report for 113 groundfish species in British Columbia, Canada. Our goals with this report are manifold and include:
(1) ensuring that the current state of knowledge on indices of population status for all groundfish stocks are available for regular review by DFO scientists, managers, and all interested parties,
(2) facilitating discussions related to stock assessment and survey program prioritization,
(3) increasing transparency about our data holdings, and
(4) producing standardized tools, derived data sets, and visualizations that are useful elsewhere, such as in stock assessments.

# Methods

We focused our groundfish synopsis report on species of commercial, recreational, conservation, or First Nations interest, and those regularly caught in DFO surveys. We included both commercial and survey population trends and biological data in the report to give an overall snapshot of available information for each species. Of the various fisheries independent surveys that DFO conducts, we presented data from those that provided the greatest spatial and taxonomic coverage of the species in the report. We chose to focus on aspects of the data that are most important to stock assessment, and display both spatial and temporal aspects of the data.

In designing the report we made the following design considerations:

1. Limit the report to two pages per species so that all data for one species could be viewed at once.
1. Focus on data types relevant to the most species.
1. Group similarly focused visualizations together.
1. Display metadata alongside visualizations where possible.
1. Show empty plots to emphasize missing data and maintain the same layout for all species.
1. Maintain consistent colour meaning throughout (e.g. data from a given survey always uses the same colour) and use colourblind-proof colours where possible.
1. Describe the visualizations in detail at the beginning of the report so that the species pages are almost entirely visual.
1. Highlight uncertainty wherever possible (e.g. through shading to indicate periods of increased uncertainty in reported catches).

We aimed to make the report automated and reproducible so that it could be easily updated in the future. We also wanted the report production to be fully transparent and traceable regarding how the data are extracted from DFO databases and treated prior to plotting. To accomplish this, we developed a family of R packages that facilitated extraction data from relational databases, tidying and arranging the necessary data for modelling or plotting, fitting statistical models, plotting the data and statistical models, and compiling the visualizations into a report format. The code for the report was written in a modular format so that individual functions could be useful for other purposes---for example, so the data could be extracted and biological models fit for stock assessments in a consistent, standardized way.

We settled on visualization components that covered trends in time and space for fisheries independent surveys and commercial fisheries catch and catch per unit effort (CPUE); visualizations of temporal trends in length and age frequencies; and visualizations of biological parameters including length at age, weight at length, age at maturity, length at maturity and maturity frequencies from fisheries independent surveys and commercial data sources. We additionally chose to visualize a summary of available counts of biological data (ages, aging structures such as otoliths, lengths, and weights) for all commercial and research samples.

Throughout report development we solicited feedback from stakeholders and other potential users of the report on data to include as well as on report structure and design. We also sought feedback from data experts for various species groups to ensure that the data being captured were accurate, complete, and relevant.

# Results

The report includes two pages of visualization for 113 stocks of British Columbia groundfish and sharks including 34 species of rockfish; 16 species of elasmobranchs and 1 species of chimaera; 16 species of flatfish; 9 species of Gadiformes (cods); 15 species of sculpins and poachers; 3 species of greenlings/lingcod; 6 species of eelpouts, 3 species of prickleback and 7 other species of Perciformes; and 1 species each of smelt, sablefish and snailfish (e.g., Figs 1 and 2) [REF and link]. The visualizations for many stocks include mostly empty plots emphasizing species for which there remain many unknown unknowns. In other cases, nearly all the data available for data-rich stocks are visualized together on two pages for the first time.

<!-- The first page for each species features metadata and temporal and spatial trends and patterns from fisheries independent surveys and commercial catch and effort data. Specifically, it includes: -->

<!-- 1. Species-specific metadata (scientific and common names, taxonomy, links to FishBase and WoRMS species pages, current conservation status, most recent DFO stock assessment or other DFO document) -->
<!-- 1. Temporal and spatial population and fishery trends -->
<!-- 1. Relative biomass trends from fisheries independent surveys -->
<!-- 1. Maps of relative biomass from the most recent fisheries independent surveys -->
<!-- 1. Trends in fisheries catches through time by gear type and region -->
<!-- 1. Trends in bottom-trawl fisheries CPUE through time by region -->
<!-- 1. Maps of fisheries CPUE by gear type for a recent window of time -->

<!-- The visualizations on the second page focus on biological samples of fish. Each page includes: -->

<!-- 1. Length frequencies by survey and year -->
<!-- 1. Age frequencies by survey and year -->
<!-- 1. Length age growth models -->
<!-- 1. von Bertalanffy growth curves fitted to age and length samples -->
<!-- 1. Weight-length growth models -->
<!-- 1. Age- and length-at-maturity models -->
<!-- 1. Maturity frequencies by maturity stage and month -->
<!-- 1. Counts of the number of available fish lengths, weights, maturities, ages, and aging structures from all surveys and all commercial samples in DFO databases -->

<!-- pcod, redbanded, rougheye? -->

# Discussion

We have described an automated report that presents up-to-date population trends and biological data from both commercial fisheries and research surveys for groundfish in British Columbia, Canada. Stock assessments are not available for most of these species, or in all years for those that are assessed, limiting the dissemination of these data. Our report facilitates the broad monitoring of groundfish populations in British Columbia waters---it ensures all B.C. groundfish scientists, managers, and interested parties have access to consistent and easily digestible visualizations of current data holdings. This increases transparency, ensures relevant parties are regularly reviewing data for indications of surprises, and facilitates discussions concerning stock assessment and survey program prioritization.

The production of our groundfish data synopsis report is automated from data extraction right through to report generation---this was only possible because of the carefully organized and maintained relational databases housing DFO groundfish fishery and survey data.
This report and its data-to-document workflow demonstrate the value of investing in the development and ongoing maintenance of organized databases for any agency collecting and housing large quantities of data. Knowledge of and accessibility to available data within an agency is fundamentally important. The functions we created to extract groundfish data for the report are available within our organization for those requiring access to the databases, and facilitate internally reviewed, standardized, and consistent data extraction methods.

<!-- - give examples of what happens when databases are well organized and open (RAM Legacy, GPDD, ...) -->

Unlike detailed species-specific analyses conducted in stock assessments, we liken our report to window shopping. Our report gives a quick flavour of the available data for a given stock and hints at possible indexes of relative population trends. However, the outputs in this report are not a substitute for species-specific stock assessment. For example, stock assessments may use different data sources than are presented in the report, analyze data on a stock-by-stock basis, and make considerations for special cases that we do not. Furthermore, relative biomass indices based on survey or commercial CPUE data in the report require careful, species-specific interpretation as they may not accurately represent abundance trends for some stocks. For example, biomass indices may be based on surveys with particularly low catchability for certain species and there are many reasons why commercial CPUE may not be proportional to abundance [e.g., @harley2001].

<!-- Our work is similar to...
- data dashboards (has anyone written a paper on this in ecology or fisheries?)
- Chris Rooper's and Dan's work
- online tools like FishBase and even IUCN (but note the differences), although ours is targeted a drilling deeper into the types of data needed in stock assessments
- search around and ask -->

We suggest that a similar approach would have broad utility across taxonomic groups, regions, and types of data. A similar approach could be useful nearly anywhere that faces monitoring multiple elements (e.g., populations, species, ecosystems, or environmental processes) with relevant data maintained in databases. The approach would be most useful for agencies that lack the capacity to assess those elements in great depth at a frequency coherent with management needs. However, even with regular detailed assessments, such a report can provide a "1000 ft" view in format consistent across all elements. Indeed, tools with a similar spirit such as FishBase (REF) or the IUCN Red List website (REF) have proven useful resources... Chris Rooper's and Dan's work others. TODO

<!-- We emphasize that it can take considerable work to set up these types of reports for the first time, but that once set up, they take less time investment to maintain. -->

Thus far, the response from stakeholders, managers, and other groundfish scientists has been overwhelmingly positive. Internally, the report has become an indispensable reference for those individuals providing science advice on groundfish in the region and the tools used to generate the report proved useful in a recent Pacific cod assessment for the coast of British Columbia [REF]. We plan to update the report to include new data on an annual or biennial basis with larger structural changes on a less frequent basis. Our future plans include adding visualizations of relevant climate data such as local climate velocities and indicators of localized range shifts [e.g., REF]. We hope our approach can serve as a template for other regions and species groups---as one of many tools---to turn survey and fisheries data into effective monitoring.

# Acknowledgements

We are grateful for the ongoing collaboration between DFO, commercial fishers, First Nations, and non-governmental organizations, which has made possible the collection of the valuable data that underlies the report described in this paper.
We thank the project's steering committee (Greg Workman, Robyn Forrest, Dana Haggarty, Chris Grandin, and Rob Kronlund) for invaluable input into the report design and feedback throughout its production.
We thank Chris Rooper and Daniel Ricard for their thorough and helpful reviews of the report.
We thank Mary Thiess and Kieran Forge for chairing and rapporteuring the review meeting, respectively.
We thank Christie Whelan for her support initiating this project.
We thank Norm Olsen, Maria Surry, and Malcolm Wyeth for providing support on data extraction and general database structure and content.

\clearpage

# Figures

```{r page1, fig.cap = "Figure caption goes here."}
# include_graphics(here("figs/decades-and-booms-viridis.pdf"))
```

```{r page2, fig.cap = "Figure caption goes here."}
# include_graphics(here("figs/decades-and-booms-viridis.pdf"))
```

\clearpage

# References
