---
title: |
  Reproducible data synopsis reports facilitate monitoring and data transparency: an example with over 100 Pacific Canadian groundfish species
author: |
  Sean C. Anderson^1\*^, Elise A. Keppel^1^\, Andrew M. Edwards^1^\
  ^1^Pacific Biological Station, Fisheries and Oceans Canada,\
     Nanaimo, BC, V6T 6N7, Canada;\
  \*sean.anderson@dfo-mpo.gc.ca\
output:
  bookdown::pdf_document2:
    number_sections: no
    toc: no
    template: "article.tex"
fontfamily: libertine
fontsize: 12pt
header-includes:
    - \usepackage{setspace}
    - \usepackage[left]{lineno}\linenumbers\modulolinenumbers[1]
geometry: "left=2.54cm,right=2.54cm,top=2.54cm,bottom=2.54cm"
bibliography: "refs.bib"
csl: "cfjas.csl"
link-citations: yes
linkcolor: "black"
urlcolor: "black"
abstract: >
  The abstract will go here.
---


```{r, echo = FALSE, message = FALSE, warning = FALSE}
library(knitr)
library(here)
opts_chunk$set(echo = FALSE, message = FALSE, warnings = FALSE)
```

Keywords:
automation,
fisheries monitoring,
groundfish,
reproducible research,
transparency,
visualization

Suggestions for possible alternative titles (thinking out loud and hopefully evolving):

1. Modern computational tools facilitate transparent presentation of
     monitoring data: an example with over 100 Pacific Canadian groundfish
     species. [leaves out reproducible though, which we probably want]
1. Reproducible presentation of monitoring data using modern computational tools:
     an example with over 100 Pacific Canadian groundfish
     species.
1. Reproducible and transparent presentation of monitoring data:
     an example for over 100 Pacific Canadian groundfish species.

\clearpage

# Introduction

Modern survey and fishery monitoring programs generate vast quantities of data;
however, turning that data into effective monitoring remains a challenge.
Agencies that collect data often lack the resources to report on all facets of
it in a timely fashion. Typically, data for only a small subset of species is
reported on through detailed stock assessments. While such focused analyses are
required for management of some stocks, broad monitoring programs across an
array of species and data types are essential to detecting ecological surprises
and "unknown unknowns" [e.g., @hilborn1987; @wintle2010]. As part of a movement
towards open data, many raw data sets, including those collected by government
agencies, are being made freely available [e.g., @obama2013;
@canada2018]. However, processing and visualizing those data sets requires
domain-specific knowledge (e.g., about sampling protocols), advanced skills
(e.g., data management, population modelling, computer programming), and time.
Collectively, these factors often limit the ability for interested parties to
derive meaningful insights.

In British Columbia (BC), Canada, Fisheries and Oceans Canada (DFO) faces these
problems in monitoring its groundfish populations and fisheries. In BC,
government groundfish scientists hold the potential responsibility of providing
science advice on over 100 species [@dfo2017]. The commercial groundfish fleet
is subject to 100% on-board and dockside monitoring, while numerous
fisheries-independent trawl and longline surveys are conducted annually,
producing large quantities of valuable data [@stanley2015; @dfo2017]. At the
same time, assessment scientists face limitations in personnel and time. As a
result, most stocks are not regularly examined through stock assessment, leaving
the majority of monitoring data unreported. Although the Canadian government is
engaged in an open-data initiative [@canada2018], some of DFO's data holdings
cannot be shared due to privacy laws. Furthermore, the data that are shared are
not easily digested without advanced data processing skills and extensive
knowledge of the survey programs and commercial fisheries.

Automated visualization and reporting is one solution to these problems. Data
visualization can serve as much more than just an endpoint to data analysis---it
can serve as a critical component of the scientific process [@fox2011]. Unlike
raw data, visualization can facilitate rapid understanding of data, engage
stakeholders, and raise awareness of data gaps. Visualization can serve as a
tool for those with domain-specific knowledge to spot errors in data
sets. Furthermore, compared to the structured nature of statistical models, the
unconstrained nature of visualization helps detect the unexpected
[@wickham2015]. The advancement of the family of data analysis packages for the
statistical software R [@r2019], such as ggplot2 [@wickham2016] and knitr
[@xie2017], makes it currently practical to produce reproducible
visualization reports of survey and fishery monitoring data.

As part of a solution to our above-mentioned challenges, we developed an
automated data synopsis report for 113 groundfish species in BC, Canada. 
Here we share our approach to enable others to consider
similar reports for their own data. Our goals with the report were manifold and
included
(1) ensuring that the current state of knowledge on indices of abundance
for all groundfish stocks are available for regular review by DFO scientists,
managers, and all interested parties,
(2) facilitating discussions related to stock assessment and survey program prioritization,
(3) increasing transparency about our data holdings, and
(4) producing standardized tools, derived data sets, and visualizations that are
useful elsewhere, such as in stock assessments.

# Methods

We focused our groundfish synopsis report on species of commercial,
recreational, conservation, or First Nations interest, and those regularly
caught in DFO surveys. We included population trends and biological data from
commercial fisheries and scientific surveys; this gave an overall snapshot of
available information for each species. Of the fisheries-independent surveys
that DFO conducts, we presented data from those that provided the greatest
spatial and taxonomic coverage of the species. We chose to focus on aspects of
the data that are most important to stock assessment, and display both spatial
and temporal aspects of the data.

In designing the report we made the following design considerations:
(1) Maintain a consistent layout for all species, including empty plots to
   emphasize a lack of data for some species.
(2) Limit the report to two pages per species so that all data for one species
   could be viewed at once.
(3) Focus on data types relevant to the most species.
(4) Group similarly focused visualizations together.
(5) Display metadata alongside visualizations where possible.
(6) Maintain consistent colour meaning throughout (e.g. data from a given survey
   always uses the same colour) and use colourblind-proof colours where
   possible.
(7) Describe the visualizations in detail at the beginning of the report so that
   the species pages are mostly visual.
(8) Highlight uncertainty wherever possible (e.g. through shading to indicate
   periods of increased uncertainty in reported catches).

We aimed to make the report automated and reproducible so that it could be
easily updated in the future. We also wanted the report production to be fully
transparent and traceable with regards to how the data are extracted from
databases and treated prior to plotting. To accomplish this, we developed a
family of R packages that facilitated extraction of data from relational
databases, tidying and arranging the necessary data for modelling or plotting,
fitting statistical models, plotting the data and statistical models, and
compiling the visualizations into a report format. The code for the report was
written in a modular format so that individual functions could be useful for
other purposes---for example, so the data could be extracted and biological
models fit for stock assessments in a consistent, standardized way.

We settled on presenting visualizations of (1) trends in time and space
for fisheries-independent surveys and commercial fisheries catch and catch per
unit effort (CPUE), (2) temporal trends in length and age
frequencies, and (3) biological parameters including length at
age, weight at length, age at maturity, length at maturity and maturity
frequencies from fisheries-independent surveys and commercial data sources. We
additionally chose to visualize a summary of counts of available biological data
(ages, aging structures such as otoliths, lengths, weights, maturities) for all
commercial and research samples.

Throughout report development we solicited feedback from stakeholders and other
potential users of the report on data to include as well as on report structure
and design. We also sought feedback from data experts for various species groups
to ensure that the data being captured were accurate, complete, and relevant.

# Results

The report includes two pages of visualization for 113 species of BC groundfish
and sharks [@anderson2019synopsis]. Figures 1 and 2 show the pages for an
example species. The species covered include 34 rockfish species; 16
elasmobranch species and one chimaera species; 16 flatfish species; nine
Gadiforme species (cods); 15 sculpin and poacher species; three
greenling/lingcod species; six eelpout species, three prickleback species, and
seven other Perciforme species; and one species each of smelt, sablefish and
snailfish. The visualizations for many data-poor species include mostly empty
plots, which graphically demonstrates the lack of data (and hence knowledge) for
such species. For data-rich species, nearly all the data available are
visualized together on two pages for the first time.

# Discussion

We have described an automated report that presents up-to-date population trends
and biological data from both commercial fisheries and research surveys for
groundfish in BC, Canada. Stock assessments are not available for
most of these species, or in every year for those that are assessed, limiting the
dissemination of these data. Our report facilitates the broad monitoring of
groundfish populations in BC waters---it ensures all BC groundfish
scientists, managers, and interested parties have access to consistent,
up-to-date, and easily digestible visualizations of data holdings. The report
increases transparency, provides a mechanism for regular review of data for
indication of surprises by relevant parties, and facilitates discussions
concerning stock assessment and survey-program prioritization.

The production of our groundfish data synopsis report is automated---from data
extraction to report generation. This is only possible because of the carefully
organized and maintained relational databases housing DFO groundfish fishery and
survey data.
<!-- With dedicated teams managing data entry, quality assurance, and quality control, Pacific DFO survey and commercial data holdings are available in a organized, machine-readable format, which permits the data extraction upon which our report is built.   -->
This report and its data-to-document workflow demonstrate the value of investing
in the development and ongoing maintenance of organized databases for any agency
collecting and housing large quantities of data [e.g. @michener2012]. Knowledge
of, and accessibility to, available data within an agency is fundamentally
important. The functions we created to extract groundfish data for the report
are available within our organization for those requiring access to the
databases, and facilitate internally reviewed, standardized, and consistent data
extraction methods.

<!-- Well-organized databases can support automated visualization to provide a rapid overview of data trends and data availability across various disciplines. Examples of open, online databases which demonstrate this automated data to visualisation workflow include the Ocean Biogeographic Information System ([@obis2019]) and FishBase ([@froese2010fishbase]). -->

<!-- - give examples of what happens when databases are well organized and open (RAM Legacy, GPDD, ...) -->

Unlike detailed species-specific analyses conducted in stock assessments, we
liken our report to window shopping. Our report gives a quick flavour of the
available data for a given stock and hints at possible indices of relative
population trends. However, the outputs in this report are not a substitute for
species-specific stock assessment. For example, stock assessments may use
different data sources than are presented in the report, analyze data on a
stock-by-stock basis, and make considerations for special cases that we do
not consider. Furthermore, relative biomass indices based on survey or commercial CPUE
data in the report require careful, species-specific interpretation as they may
not accurately represent abundance trends for some stocks. For example, biomass
indices may be based on surveys with particularly low catchability for certain
species and there are many reasons why commercial CPUE may not be proportional
to abundance [e.g., @harley2001].

<!-- Our work is similar to...
- data dashboards (has anyone written a paper on this in ecology or fisheries?)
- Chris Rooper's and Dan's work
- online tools like FishBase and even IUCN (but note the differences), although ours is targeted a drilling deeper into the types of data needed in stock assessments
- search around and ask -->

We suggest that a similar approach would have broad utility across taxonomic
groups, regions, and types of data. A similar approach could be useful nearly
anywhere agencies face monitoring multiple elements (e.g., populations, species,
ecosystems, or environmental processes) with relevant data maintained in
databases [e.g., @ricard2013]. The approach would be most useful for agencies
that lack the capacity to assess those elements in great depth at a frequency
that meets management needs. However, even with regular detailed assessments,
such a report can provide a broad overview in a format consistent across all
elements.
<!-- Indeed, tools with a similar spirit, such as FishBase [@froese2010fishbase] or the IUCN Red List website [@iucn2019], have proven useful resources... Chris Rooper's and Dan's [@ricard2013] work others.  -->
<!-- TODO [and rewrite start of next sentence as necessary for flow].  -->
Furthermore, similar approaches have been used to facilitate completion of stock
assessments---for example, in automating the output of complex models
[@edwards2012yellowmouth] and collaboratively running models and producing the
assessment document under tight deadlines [@berger2019hake]. Although we caution
that it can take considerable work to set up this type of workflow initially,
the approach can yield considerable efficiency gains in future years.

<!-- We do caution that it can take considerable work to set up this type of -->
<!-- workflow for the first time. However, once set up in a structured way, -->
<!-- we are cautiously optimistic that it will not be onerous to  -->
<!-- maintain the code and to produce annual or  -->
<!-- of our report as new data become available. -->

Thus far, the response to our report from stakeholders, managers, and other
groundfish scientists has been positive. Internally, the report has become an
indispensable reference for individuals providing science advice on groundfish
in the region and the tools used to generate the report proved useful in a
recent Pacific cod assessment for the coast of BC [@forrest2019pcod] and in a
number of other ongoing projects. We plan to update the report to include new
data on an annual or biennial basis, with larger structural changes on a less
frequent basis. Our future plans include adding visualizations of relevant
climate data such as local climate velocities [e.g.,
@loarie2009] and indicators of localized range shifts [e.g., @thorson2016]. We
hope our approach can serve as a template for other regions and species
groups---as one of many tools---to turn survey and fisheries data into effective
monitoring.

# Acknowledgements

We are grateful for the ongoing collaboration between DFO, commercial fishers,
First Nations, and non-governmental organizations, which has made possible the
collection of the valuable data that underlies the report described in this
paper. For invaluable input into the report's design and feedback we thank Greg
Workman, Robyn Forrest, Dana Haggarty, Chris Grandin, Rob Kronlund, Chris
Rooper, and Daniel Ricard. We thank Norm Olsen, Maria Surry, and Malcolm Wyeth
for providing support on data extraction and general database structure and
content.

<!-- pcod, redbanded, rougheye? -->

\clearpage

\begin{figure}[htbp]
\centering
\includegraphics[width=13cm]{fig1.png}
\caption{Example first page for rougheye/blackspotted rockfish complex
(\emph{Sebastes aleutianus/melanostictus}) featuring metadata and temporal and
spatial trends from fisheries-independent surveys and commercial catch and
effort data in British Columbia, Canada. (Top row) Relative biomass indices from up to ten
surveys, commercial catch in each geographical region (panels) and gear type (colour), and
standardized (solid line) and unstandardized (dashed line) commercial bottom
catch per unit effort (CPUE). (Bottom row) Modelled relative biomass in space
from four synoptic trawl surveys (left), two hard bottom long line surveys
(second from left), and the International Pacific Halibut Commission (IPHC)
setline survey (third from left); commercial trawl (second from right) and hook
and line (right; H \& L) CPUE.}
\label{fig:page1}
\end{figure}

\begin{figure}[htbp]
\centering
\includegraphics[width=13cm]{fig2.png}
\caption{Example second page for rougheye/blackspotted rockfish complex
(\emph{Sebastes aleutianus/melanostictus}) featuring biological sample,
maturity, and growth data in British Columbia, Canada. (Top left) Length frequencies by year
and survey for females (coloured) and male (grey). (Top right) Length-age
von-Bertalanffy and weight-length model fits. (Second row) Age frequencies by
year and survey. (Third row) Age-at-maturity and length-at-maturity model fits
and frequency of maturity stage by month. (Bottom row) Counts of available fish
lengths, weights, maturities, ages, and aging structures from all available
survey and commercial samples.}
\label{fig:page2}
\end{figure}

\clearpage

# References
